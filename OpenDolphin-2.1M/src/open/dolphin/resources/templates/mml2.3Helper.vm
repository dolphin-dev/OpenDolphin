##----------------------------------------------------------------------------- start
<?xml version="1.0" encoding="UTF-8"?> 
<Mml version="2.3" createDate="${mmlHelper.getConfirmDate()}" 
	 xmlns:xhtml="http://www.w3.org/1999/xhtml"
	 xmlns:mmlCm="http://www.medxml.net/MML/SharedComponent/Common/1.0"
	 xmlns:mmlNm="http://www.medxml.net/MML/SharedComponent/Name/1.0"
	 xmlns:mmlFc="http://www.medxml.net/MML/SharedComponent/Facility/1.0"
	 xmlns:mmlDp="http://www.medxml.net/MML/SharedComponent/Department/1.0"
	 xmlns:mmlAd="http://www.medxml.net/MML/SharedComponent/Address/1.0"
	 xmlns:mmlPh="http://www.medxml.net/MML/SharedComponent/Phone/1.0"
	 xmlns:mmlPsi="http://www.medxml.net/MML/SharedComponent/PersonalizedInfo/1.0"
	 xmlns:mmlCi="http://www.medxml.net/MML/SharedComponent/CreatorInfo/1.0"
	 xmlns:mmlPi="http://www.medxml.net/MML/ContentModule/PatientInfo/1.0"
	 xmlns:mmlBc="http://www.medxml.net/MML/ContentModule/BaseClinic/1.0"
	 xmlns:mmlFcl="http://www.medxml.net/MML/ContentModule/FirstClinic/1.0"
	 xmlns:mmlHi="http://www.medxml.net/MML/ContentModule/HealthInsurance/1.1"
	 xmlns:mmlLs="http://www.medxml.net/MML/ContentModule/Lifestyle/1.0"
	 xmlns:mmlPc="http://www.medxml.net/MML/ContentModule/ProgressCourse/1.0"
	 xmlns:mmlRd="http://www.medxml.net/MML/ContentModule/RegisteredDiagnosis/1.0"
	 xmlns:mmlSg="http://www.medxml.net/MML/ContentModule/Surgery/1.0"
	 xmlns:mmlSm="http://www.medxml.net/MML/ContentModule/Summary/1.0"
	 xmlns:mmlLb="http://www.medxml.net/MML/ContentModule/test/1.0"
	 xmlns:mmlRp="http://www.medxml.net/MML/ContentModule/report/1.0"
	 xmlns:mmlRe="http://www.medxml.net/MML/ContentModule/Referral/1.0"
	 xmlns:mmlSc="http://www.medxml.net/MML/SharedComponent/Security/1.0"
	 xmlns:claim="http://www.medxml.net/claim/claimModule/2.1"
	 xmlns:claimA="http://www.medxml.net/claim/claimAmountModule/2.1">
  <MmlHeader>
    <mmlCi:CreatorInfo>
        <mmlPsi:PersonalizedInfo>
            <mmlCm:Id mmlCm:type="${mmlHelper.getCNCreatorIdType()}" mmlCm:tableId="${mmlHelper.getCNCreatorIdTableId()}">${mmlHelper.getCNCreatorId()}</mmlCm:Id> 
            <mmlPsi:personName>
                <mmlNm:Name mmlNm:repCode="I" mmlNm:tableId="MML0025">
                    <mmlNm:fullname>${mmlHelper.getCreatorName()}</mmlNm:fullname> 
		</mmlNm:Name>
            </mmlPsi:personName>
            <mmlFc:Facility>
                <mmlFc:name mmlFc:repCode="I" mmlFc:tableId="MML0025">${mmlHelper.getCNFacilityName()}</mmlFc:name> 
                <mmlCm:Id mmlCm:type="${mmlHelper.getCNFacilityIdType()}" mmlCm:tableId="${mmlHelper.getCNFacilityIdTableId()}">${mmlHelper.getCNFacilityId()}</mmlCm:Id> 
            </mmlFc:Facility>
        </mmlPsi:PersonalizedInfo>
        <mmlCi:creatorLicense mmlCi:tableId="MML0026">${mmlHelper.getCreatorLicense()}</mmlCi:creatorLicense> 
    </mmlCi:CreatorInfo>
    <masterId>
      <mmlCm:Id mmlCm:type="${mmlHelper.getCNPatientIdType()}" mmlCm:tableId="${mmlHelper.getCNPatientIdTableId()}">${mmlHelper.getCNPatientId()}</mmlCm:Id> 
    </masterId>
    <toc>
      <tocItem>http://www.medxml.net/MML/SharedComponent/Common/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/SharedComponent/Name/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/SharedComponent/Facility/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/SharedComponent/Department/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/SharedComponent/Address/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/SharedComponent/Phone/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/SharedComponent/PersonalizedInfo/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/SharedComponent/CreatorInfo/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/SharedComponent/Security/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/ContentModule/PatientInfo/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/ContentModule/BaseClinic/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/ContentModule/FirstClinic/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/ContentModule/HealthInsurance/1.1</tocItem> 
      <tocItem>http://www.medxml.net/MML/ContentModule/Lifestyle/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/ContentModule/ProgressCourse/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/ContentModule/RegisteredDiagnosis/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/ContentModule/Surgery/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/ContentModule/Summary/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/ContentModule/test/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/ContentModule/report/1.0</tocItem> 
      <tocItem>http://www.medxml.net/MML/ContentModule/Referral/1.0</tocItem> 
      <tocItem>http://www.medxml.net/claim/claimModule/2.1</tocItem> 
      <tocItem>http://www.medxml.net/claim/claimAmountModule/2.1</tocItem> 
    </toc>
  </MmlHeader>
##----------------------------------------------------------------------------- end MMLHeader
##
##----------------------------------------------------------------------------- start MMLBody
  <MmlBody>
    <MmlModuleItem>
        <docInfo contentModuleType="progressCourse">

            <securityLevel>
#foreach ($ar in $mmlHelper.getAccessRights())        
                <accessRight permit="${ar.getPermission()}">
#if ($ar.getLicenseeCodeType() == "facilityCode")          
                    <mmlSc:facility>
                        <mmlSc:facilityName mmlSc:facilityCode="${ar.getLicenseeCode()}">${ar.getLicenseeName()}</mmlSc:facilityName> 
                    </mmlSc:facility>
#elseif ($ar.getLicenseeCodeType() == "personCode")
                    <mmlSc:person>
                        <mmlSc:personName mmlSc:personCode="${ar.getLicenseeCode()}">${ar.getLicenseeName()}</mmlSc:personName> 
                    </mmlSc:person>
#end
                </accessRight>
#end          
            </securityLevel>

            <title generationPurpose="${mmlHelper.getPurpose()}">${mmlHelper.getTitle()}</title> 

            <docId>
                <uid>${mmlHelper.getDocId()}</uid> 
#if ($mmlHelper.getParentId())
                <parentId relation="${mmlHelper.getParentIdRelation()}">${mmlHelper.getParentId()}</parentId>
#end  
                <groupId groupClass="record">${mmlHelper.getGroupId()}</groupId> 
            </docId>

            <confirmDate firstConfirmDate="${mmlHelper.getFirstConfirmDate()}">${mmlHelper.getConfirmDate()}</confirmDate> 

            <mmlCi:CreatorInfo>
                <mmlPsi:PersonalizedInfo>
                    <mmlCm:Id mmlCm:type="${mmlHelper.getCNCreatorIdType()}" mmlCm:tableId="${mmlHelper.getCNCreatorIdTableId()}">${mmlHelper.getCNCreatorId()}</mmlCm:Id> 
                    <mmlPsi:personName>
                        <mmlNm:Name mmlNm:repCode="I" mmlNm:tableId="MML0025">
                            <mmlNm:fullname>${mmlHelper.getCreatorName()}</mmlNm:fullname> 
                        </mmlNm:Name>
                    </mmlPsi:personName>
                    <mmlFc:Facility>
                        <mmlFc:name mmlFc:repCode="I" mmlFc:tableId="MML0025">${mmlHelper.getCNFacilityName()}</mmlFc:name> 
                        <mmlCm:Id mmlCm:type="${mmlHelper.getCNFacilityIdType()}" mmlCm:tableId="${mmlHelper.getCNFacilityIdTableId()}">${mmlHelper.getCNFacilityId()}</mmlCm:Id> 
                    </mmlFc:Facility>
                </mmlPsi:PersonalizedInfo>
                <mmlCi:creatorLicense mmlCi:tableId="MML0026">${mmlHelper.getCreatorLicense()}</mmlCi:creatorLicense> 
            </mmlCi:CreatorInfo>

#if ($mmlHelper.getSchema())
            <extRefs>
#foreach($schema in $mmlHelper.getSchema())
#set ($extRef = $schema.getExtRef())
                <mmlCm:extRef mmlCm:contentType="${extRef.getContentType()}" mmlCm:medicalRole="${extRef.getMedicalRole()}" mmlCm:title="${extRef.getTitle()}" mmlCm:href="${extRef.getHref()}"/>
#end
            </extRefs>
#else		
            <extRefs />
#end        
        </docInfo>

        <content>
            <mmlPc:ProgressCourseModule>
                <mmlPc:FreeExpression>
                    ${mmlHelper.getFreeExpression()}
                </mmlPc:FreeExpression>
            </mmlPc:ProgressCourseModule>
        </content>
    </MmlModuleItem>
  </MmlBody>
</Mml>